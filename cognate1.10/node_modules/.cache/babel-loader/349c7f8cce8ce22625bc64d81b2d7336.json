{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _asyncToGenerator = require('@babel/runtime/helpers/asyncToGenerator');\n\nvar _regeneratorRuntime = require('@babel/runtime/regenerator');\n\nvar fetch = require('cross-fetch');\n\nvar PNG = require('@react-pdf/png-js');\n\nfunction _interopDefaultLegacy(e) {\n  return e && typeof e === 'object' && 'default' in e ? e : {\n    'default': e\n  };\n}\n\nvar _asyncToGenerator__default = /*#__PURE__*/_interopDefaultLegacy(_asyncToGenerator);\n\nvar _regeneratorRuntime__default = /*#__PURE__*/_interopDefaultLegacy(_regeneratorRuntime);\n\nvar fetch__default = /*#__PURE__*/_interopDefaultLegacy(fetch);\n\nvar PNG__default = /*#__PURE__*/_interopDefaultLegacy(PNG);\n\nPNG__default[\"default\"].isValid = function (data) {\n  try {\n    return !!new PNG__default[\"default\"](data);\n  } catch (e) {\n    return false;\n  }\n}; // Extracted from https://github.com/devongovett/pdfkit/blob/master/lib/image/jpeg.coffee\n\n\nvar MARKERS = [0xffc0, 0xffc1, 0xffc2, 0xffc3, 0xffc5, 0xffc6, 0xffc7, 0xffc8, 0xffc9, 0xffca, 0xffcb, 0xffcc, 0xffcd, 0xffce, 0xffcf];\n\nvar JPEG = function JPEG(data) {\n  this.data = null;\n  this.width = null;\n  this.height = null;\n  this.data = data;\n\n  if (data.readUInt16BE(0) !== 0xffd8) {\n    throw new Error('SOI not found in JPEG');\n  }\n\n  var marker;\n  var pos = 2;\n\n  while (pos < data.length) {\n    marker = data.readUInt16BE(pos);\n    pos += 2;\n\n    if (MARKERS.includes(marker)) {\n      break;\n    }\n\n    pos += data.readUInt16BE(pos);\n  }\n\n  if (!MARKERS.includes(marker)) {\n    throw new Error('Invalid JPEG.');\n  }\n\n  pos += 3;\n  this.height = data.readUInt16BE(pos);\n  pos += 2;\n  this.width = data.readUInt16BE(pos);\n};\n\nJPEG.isValid = function (data) {\n  if (!data || !Buffer.isBuffer(data) || data.readUInt16BE(0) !== 0xffd8) {\n    return false;\n  }\n\n  var marker;\n  var pos = 2;\n\n  while (pos < data.length) {\n    marker = data.readUInt16BE(pos);\n    pos += 2;\n\n    if (MARKERS.includes(marker)) {\n      break;\n    }\n\n    pos += data.readUInt16BE(pos);\n  }\n\n  if (!MARKERS.includes(marker)) {\n    return false;\n  }\n\n  return true;\n};\n\nvar createCache = function createCache(_temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n      _ref$limit = _ref.limit,\n      limit = _ref$limit === void 0 ? 100 : _ref$limit;\n\n  var cache = {};\n  var keys = [];\n  return {\n    get: function get(key) {\n      return cache[key];\n    },\n    set: function set(key, value) {\n      keys.push(key);\n\n      if (keys.length > limit) {\n        delete cache[keys.shift()];\n      }\n\n      cache[key] = value;\n    },\n    reset: function reset() {\n      cache = {};\n      keys = [];\n    },\n    length: function length() {\n      return keys.length;\n    }\n  };\n};\n\nvar IMAGE_CACHE = createCache({\n  limit: 30\n});\n\nvar fetchRemoteFile = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator__default[\"default\"]( /*#__PURE__*/_regeneratorRuntime__default[\"default\"].mark(function _callee(uri, options) {\n    var response, buffer;\n    return _regeneratorRuntime__default[\"default\"].wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return fetch__default[\"default\"](uri, options);\n\n          case 2:\n            response = _context.sent;\n            _context.next = 5;\n            return response.buffer ? response.buffer() : response.arrayBuffer();\n\n          case 5:\n            buffer = _context.sent;\n            return _context.abrupt(\"return\", buffer.constructor.name === 'Buffer' ? buffer : Buffer.from(buffer));\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function fetchRemoteFile(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar isValidFormat = function isValidFormat(format) {\n  var lower = format.toLowerCase();\n  return lower === 'jpg' || lower === 'jpeg' || lower === 'png';\n};\n\nvar guessFormat = function guessFormat(buffer) {\n  var format;\n\n  if (JPEG.isValid(buffer)) {\n    format = 'jpg';\n  } else if (PNG__default[\"default\"].isValid(buffer)) {\n    format = 'png';\n  }\n\n  return format;\n};\n\nvar isCompatibleBase64 = function isCompatibleBase64(_ref2) {\n  var uri = _ref2.uri;\n  return /^data:image\\/[a-zA-Z]*;base64,[^\"]*/g.test(uri);\n};\n\nfunction getImage(body, extension) {\n  switch (extension.toLowerCase()) {\n    case 'jpg':\n    case 'jpeg':\n      return new JPEG(body);\n\n    case 'png':\n      return new PNG__default[\"default\"](body);\n\n    default:\n      return null;\n  }\n}\n\nvar resolveBase64Image = function resolveBase64Image(_ref3) {\n  var uri = _ref3.uri;\n  var match = /^data:image\\/([a-zA-Z]*);base64,([^\"]*)/g.exec(uri);\n  var format = match[1];\n  var data = match[2];\n\n  if (!isValidFormat(format)) {\n    throw new Error(\"Base64 image invalid format: \" + format);\n  }\n\n  return new Promise(function (resolve) {\n    return resolve(getImage(Buffer.from(data, 'base64'), format));\n  });\n};\n\nvar resolveImageFromData = function resolveImageFromData(src) {\n  if (src.data && src.format) {\n    return new Promise(function (resolve) {\n      return resolve(getImage(src.data, src.format));\n    });\n  }\n\n  throw new Error(\"Invalid data given for local file: \" + JSON.stringify(src));\n};\n\nvar resolveBufferImage = function resolveBufferImage(buffer) {\n  var format = guessFormat(buffer);\n\n  if (format) {\n    return new Promise(function (resolve) {\n      return resolve(getImage(buffer, format));\n    });\n  }\n\n  return Promise.resolve();\n};\n\nvar getImageFormat = function getImageFormat(body) {\n  var isPng = body[0] === 137 && body[1] === 80 && body[2] === 78 && body[3] === 71 && body[4] === 13 && body[5] === 10 && body[6] === 26 && body[7] === 10;\n  var isJpg = body[0] === 255 && body[1] === 216 && body[2] === 255;\n  var extension = '';\n\n  if (isPng) {\n    extension = 'png';\n  } else if (isJpg) {\n    extension = 'jpg';\n  } else {\n    throw new Error('Not valid image extension');\n  }\n\n  return extension;\n};\n\nvar resolveImageFromUrl = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator__default[\"default\"]( /*#__PURE__*/_regeneratorRuntime__default[\"default\"].mark(function _callee2(src) {\n    var uri, body, headers, _src$method, method, data, extension;\n\n    return _regeneratorRuntime__default[\"default\"].wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            uri = src.uri, body = src.body, headers = src.headers, _src$method = src.method, method = _src$method === void 0 ? 'GET' : _src$method;\n            {\n              _context2.next = 7;\n              break;\n            }\n\n          case 4:\n            _context2.t0 = _context2.sent;\n            _context2.next = 10;\n            break;\n\n          case 7:\n            _context2.next = 9;\n            return fetchRemoteFile(uri, {\n              body: body,\n              headers: headers,\n              method: method\n            });\n\n          case 9:\n            _context2.t0 = _context2.sent;\n\n          case 10:\n            data = _context2.t0;\n            extension = getImageFormat(data);\n            return _context2.abrupt(\"return\", getImage(data, extension));\n\n          case 13:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function resolveImageFromUrl(_x3) {\n    return _ref4.apply(this, arguments);\n  };\n}();\n\nvar resolveImage = function resolveImage(src, _temp) {\n  var _ref5 = _temp === void 0 ? {} : _temp,\n      _ref5$cache = _ref5.cache,\n      cache = _ref5$cache === void 0 ? true : _ref5$cache;\n\n  var cacheKey = src.data ? src.data.toString() : src.uri;\n\n  if (cache && IMAGE_CACHE.get(cacheKey)) {\n    return IMAGE_CACHE.get(cacheKey);\n  }\n\n  var image;\n\n  if (isCompatibleBase64(src)) {\n    image = resolveBase64Image(src);\n  } else if (Buffer.isBuffer(src)) {\n    image = resolveBufferImage(src);\n  } else if (typeof src === 'object' && src.data) {\n    image = resolveImageFromData(src);\n  } else {\n    image = resolveImageFromUrl(src);\n  }\n\n  if (!image) {\n    throw new Error('Cannot resolve image');\n  }\n\n  if (cache) {\n    IMAGE_CACHE.set(cacheKey, image);\n  }\n\n  return image;\n};\n\nexports[\"default\"] = resolveImage;","map":{"version":3,"mappings":"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","names":["Object","defineProperty","exports","value","_asyncToGenerator","require","_regeneratorRuntime","fetch","PNG","_interopDefaultLegacy","e","_asyncToGenerator__default","_regeneratorRuntime__default","fetch__default","PNG__default","isValid","data","MARKERS","JPEG","width","height","readUInt16BE","Error","marker","pos","length","includes","Buffer","isBuffer","createCache","_temp","_ref","_ref$limit","limit","cache","keys","get","key","set","push","shift","reset","IMAGE_CACHE","fetchRemoteFile","mark","_callee","uri","options","response","buffer","wrap","_callee$","_context","prev","next","sent","arrayBuffer","abrupt","constructor","name","from","stop","_x","_x2","apply","arguments","isValidFormat","format","lower","toLowerCase","guessFormat","isCompatibleBase64","_ref2","test","getImage","body","extension","resolveBase64Image","_ref3","match","exec","Promise","resolve","resolveImageFromData","src","JSON","stringify","resolveBufferImage","getImageFormat","isPng","isJpg","resolveImageFromUrl","_ref4","_callee2","headers","_src$method","method","_callee2$","_context2","t0","_x3","resolveImage","_ref5","_ref5$cache","cacheKey","toString","image"],"sources":["D:/Art Lisboa Files/React files/cognate1.8/node_modules/@react-pdf/image/lib/index.browser.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar _asyncToGenerator = require('@babel/runtime/helpers/asyncToGenerator');\nvar _regeneratorRuntime = require('@babel/runtime/regenerator');\nvar fetch = require('cross-fetch');\nvar PNG = require('@react-pdf/png-js');\n\nfunction _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }\n\nvar _asyncToGenerator__default = /*#__PURE__*/_interopDefaultLegacy(_asyncToGenerator);\nvar _regeneratorRuntime__default = /*#__PURE__*/_interopDefaultLegacy(_regeneratorRuntime);\nvar fetch__default = /*#__PURE__*/_interopDefaultLegacy(fetch);\nvar PNG__default = /*#__PURE__*/_interopDefaultLegacy(PNG);\n\nPNG__default[\"default\"].isValid = function (data) {\n  try {\n    return !!new PNG__default[\"default\"](data);\n  } catch (e) {\n    return false;\n  }\n};\n\n// Extracted from https://github.com/devongovett/pdfkit/blob/master/lib/image/jpeg.coffee\nvar MARKERS = [0xffc0, 0xffc1, 0xffc2, 0xffc3, 0xffc5, 0xffc6, 0xffc7, 0xffc8, 0xffc9, 0xffca, 0xffcb, 0xffcc, 0xffcd, 0xffce, 0xffcf];\n\nvar JPEG = function JPEG(data) {\n  this.data = null;\n  this.width = null;\n  this.height = null;\n  this.data = data;\n\n  if (data.readUInt16BE(0) !== 0xffd8) {\n    throw new Error('SOI not found in JPEG');\n  }\n\n  var marker;\n  var pos = 2;\n\n  while (pos < data.length) {\n    marker = data.readUInt16BE(pos);\n    pos += 2;\n\n    if (MARKERS.includes(marker)) {\n      break;\n    }\n\n    pos += data.readUInt16BE(pos);\n  }\n\n  if (!MARKERS.includes(marker)) {\n    throw new Error('Invalid JPEG.');\n  }\n\n  pos += 3;\n  this.height = data.readUInt16BE(pos);\n  pos += 2;\n  this.width = data.readUInt16BE(pos);\n};\n\nJPEG.isValid = function (data) {\n  if (!data || !Buffer.isBuffer(data) || data.readUInt16BE(0) !== 0xffd8) {\n    return false;\n  }\n\n  var marker;\n  var pos = 2;\n\n  while (pos < data.length) {\n    marker = data.readUInt16BE(pos);\n    pos += 2;\n\n    if (MARKERS.includes(marker)) {\n      break;\n    }\n\n    pos += data.readUInt16BE(pos);\n  }\n\n  if (!MARKERS.includes(marker)) {\n    return false;\n  }\n\n  return true;\n};\n\nvar createCache = function createCache(_temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n      _ref$limit = _ref.limit,\n      limit = _ref$limit === void 0 ? 100 : _ref$limit;\n\n  var cache = {};\n  var keys = [];\n  return {\n    get: function get(key) {\n      return cache[key];\n    },\n    set: function set(key, value) {\n      keys.push(key);\n\n      if (keys.length > limit) {\n        delete cache[keys.shift()];\n      }\n\n      cache[key] = value;\n    },\n    reset: function reset() {\n      cache = {};\n      keys = [];\n    },\n    length: function length() {\n      return keys.length;\n    }\n  };\n};\n\nvar IMAGE_CACHE = createCache({\n  limit: 30\n});\n\nvar fetchRemoteFile = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator__default[\"default\"]( /*#__PURE__*/_regeneratorRuntime__default[\"default\"].mark(function _callee(uri, options) {\n    var response, buffer;\n    return _regeneratorRuntime__default[\"default\"].wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return fetch__default[\"default\"](uri, options);\n\n          case 2:\n            response = _context.sent;\n            _context.next = 5;\n            return response.buffer ? response.buffer() : response.arrayBuffer();\n\n          case 5:\n            buffer = _context.sent;\n            return _context.abrupt(\"return\", buffer.constructor.name === 'Buffer' ? buffer : Buffer.from(buffer));\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function fetchRemoteFile(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar isValidFormat = function isValidFormat(format) {\n  var lower = format.toLowerCase();\n  return lower === 'jpg' || lower === 'jpeg' || lower === 'png';\n};\n\nvar guessFormat = function guessFormat(buffer) {\n  var format;\n\n  if (JPEG.isValid(buffer)) {\n    format = 'jpg';\n  } else if (PNG__default[\"default\"].isValid(buffer)) {\n    format = 'png';\n  }\n\n  return format;\n};\n\nvar isCompatibleBase64 = function isCompatibleBase64(_ref2) {\n  var uri = _ref2.uri;\n  return /^data:image\\/[a-zA-Z]*;base64,[^\"]*/g.test(uri);\n};\n\nfunction getImage(body, extension) {\n  switch (extension.toLowerCase()) {\n    case 'jpg':\n    case 'jpeg':\n      return new JPEG(body);\n\n    case 'png':\n      return new PNG__default[\"default\"](body);\n\n    default:\n      return null;\n  }\n}\n\nvar resolveBase64Image = function resolveBase64Image(_ref3) {\n  var uri = _ref3.uri;\n  var match = /^data:image\\/([a-zA-Z]*);base64,([^\"]*)/g.exec(uri);\n  var format = match[1];\n  var data = match[2];\n\n  if (!isValidFormat(format)) {\n    throw new Error(\"Base64 image invalid format: \" + format);\n  }\n\n  return new Promise(function (resolve) {\n    return resolve(getImage(Buffer.from(data, 'base64'), format));\n  });\n};\n\nvar resolveImageFromData = function resolveImageFromData(src) {\n  if (src.data && src.format) {\n    return new Promise(function (resolve) {\n      return resolve(getImage(src.data, src.format));\n    });\n  }\n\n  throw new Error(\"Invalid data given for local file: \" + JSON.stringify(src));\n};\n\nvar resolveBufferImage = function resolveBufferImage(buffer) {\n  var format = guessFormat(buffer);\n\n  if (format) {\n    return new Promise(function (resolve) {\n      return resolve(getImage(buffer, format));\n    });\n  }\n\n  return Promise.resolve();\n};\n\nvar getImageFormat = function getImageFormat(body) {\n  var isPng = body[0] === 137 && body[1] === 80 && body[2] === 78 && body[3] === 71 && body[4] === 13 && body[5] === 10 && body[6] === 26 && body[7] === 10;\n  var isJpg = body[0] === 255 && body[1] === 216 && body[2] === 255;\n  var extension = '';\n\n  if (isPng) {\n    extension = 'png';\n  } else if (isJpg) {\n    extension = 'jpg';\n  } else {\n    throw new Error('Not valid image extension');\n  }\n\n  return extension;\n};\n\nvar resolveImageFromUrl = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator__default[\"default\"]( /*#__PURE__*/_regeneratorRuntime__default[\"default\"].mark(function _callee2(src) {\n    var uri, body, headers, _src$method, method, data, extension;\n\n    return _regeneratorRuntime__default[\"default\"].wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            uri = src.uri, body = src.body, headers = src.headers, _src$method = src.method, method = _src$method === void 0 ? 'GET' : _src$method;\n\n            {\n              _context2.next = 7;\n              break;\n            }\n\n          case 4:\n            _context2.t0 = _context2.sent;\n            _context2.next = 10;\n            break;\n\n          case 7:\n            _context2.next = 9;\n            return fetchRemoteFile(uri, {\n              body: body,\n              headers: headers,\n              method: method\n            });\n\n          case 9:\n            _context2.t0 = _context2.sent;\n\n          case 10:\n            data = _context2.t0;\n            extension = getImageFormat(data);\n            return _context2.abrupt(\"return\", getImage(data, extension));\n\n          case 13:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function resolveImageFromUrl(_x3) {\n    return _ref4.apply(this, arguments);\n  };\n}();\n\nvar resolveImage = function resolveImage(src, _temp) {\n  var _ref5 = _temp === void 0 ? {} : _temp,\n      _ref5$cache = _ref5.cache,\n      cache = _ref5$cache === void 0 ? true : _ref5$cache;\n\n  var cacheKey = src.data ? src.data.toString() : src.uri;\n\n  if (cache && IMAGE_CACHE.get(cacheKey)) {\n    return IMAGE_CACHE.get(cacheKey);\n  }\n\n  var image;\n\n  if (isCompatibleBase64(src)) {\n    image = resolveBase64Image(src);\n  } else if (Buffer.isBuffer(src)) {\n    image = resolveBufferImage(src);\n  } else if (typeof src === 'object' && src.data) {\n    image = resolveImageFromData(src);\n  } else {\n    image = resolveImageFromUrl(src);\n  }\n\n  if (!image) {\n    throw new Error('Cannot resolve image');\n  }\n\n  if (cache) {\n    IMAGE_CACHE.set(cacheKey, image);\n  }\n\n  return image;\n};\n\nexports[\"default\"] = resolveImage;\n"]},"metadata":{},"sourceType":"script"}